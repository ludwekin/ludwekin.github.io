---

title : “esp32 s3实现foc算法来控制BLDC电机”

published : false

---

## 遇到的问题

1. 实现 FOC 的时候，为什么需要 Clarke / Park 变换？

    - Clarke 变换是把三相电流 (abc) 投影到 α-β 静止坐标系，简化成二维表示；
    - Park 变换再把 α-β 坐标旋转到 d-q 同步旋转坐标系，使电机的电流解耦成磁链分量 (Id) 和转矩分量 (Iq)，便于单独控制，实现更高效、稳定的控制。
2. 为啥pcb设计中需要 光耦？

    - 在电机驱动电路中，控制信号与功率电路需要隔离，避免高压干扰传递到控制电路中。光耦可以将低压控制信号传递到高压电机驱动电路。
3. 怎么设计 PI 电流调节器的？参数怎么调？

    - 采用了两个 PI 控制器分别调节 d 轴电流和 q 轴电流。调参时，先固定 Id = 0，专注于 Iq 回路，通过阶跃响应调节比例系数 Kp，使系统快速响应，再逐步增加 Ki，抑制稳态误差。最终通过实验迭代，得到既不过冲也不振荡的参数组合。
4. 什么是 PI 控制器？
    - PI 控制器 = Proportional-Integral 控制器。
    - P ：误差越大，控制器输出越强。
    - I ：能消除稳态误差。缺点：容易造成过冲、振荡。
5. 三相逆变器是什么？
    - 作用是把 直流电源 (DC) 转换成 三相交流电 (AC)。
    - 结构上最常见的是 三相全桥。
    - 工作原理就是，控制器（比如 ESP32）通过 PWM/SVPWM 控制 6 个管子的开关顺序，从而实现磁场定向控制。

## 遇到的问题

1. 调试 FOC 的过程中，遇到的最大问题是什么？
    - 一开始电机振荡严重，后来发现是电流采样相位延迟和死区补偿没处理好。通过增加软件补偿和改进电流采样同步方法，稳定了控制效果。