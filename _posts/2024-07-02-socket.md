---

title : "socket网络编程的主要流程，个人学习笔记"

---


## socket网络编程的主要流程？

socket网络编程主要分服务端和客户端。
    
- 服务端：socket -> bind -> listen -> accept -> send/recv -> close
- 客户端：socket -> connect -> send/recv -> close

## socket 为什么能工作？它和操作系统有什么关系？

Socket 与操作系统的关系
	1.	Socket 是 OS 提供的抽象
	    - 在 Unix/Linux/Windows 里，一切皆文件。
	    - socket 就是 文件描述符（file descriptor），和 open() 打开的文件类似。
	    - 你用 socket() 得到的不是“真的硬件接口”，而是 OS 给你分配的一个“句柄”。
	2.	系统调用（System Call）
	    - 当你在 C 程序里写 send()、recv()，其实是调用 系统调用（syscall）。
	    - 应用程序 → 用户态（user mode）
	    - 系统调用 → 切换到内核态（kernel mode）
	    - 内核中的 TCP/IP 协议栈 来处理数据。
	3.	操作系统的 TCP/IP 协议栈
	    - OS 内核里有实现好的 协议栈：ARP、IP、TCP、UDP…
	    - 你写的程序不需要管包的格式，OS 会帮你完成：
        - 拆分数据（分片）
	    - 组装数据
	    - 计算校验和
	    - 处理丢包、重传、流量控制
	4.	驱动和网卡（Network Interface Card, NIC）
	    - 协议栈把数据交给 网卡驱动（NIC driver）。
	    - 驱动再通过硬件网卡 → 物理链路（电缆、Wi-Fi）发出去。
	    - 接收时就是反过来：网卡收到 → 驱动 → 内核协议栈 → 你的 socket。


